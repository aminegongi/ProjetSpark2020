{% extends 'frontOffice/base.html.Twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script type="text/javascript" src="https://platform-api.sharethis.com/js/sharethis.js#property=5ed3c83e46c8f10012f1ea30&product=inline-share-buttons" async="async"></script>
    <!-- style card Suggestion Recette -->
    <style>
        .card-wrapper {
            display:flex;
            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
            transition: 0.3s;
            width: 15%;
            border-radius: 5px;
            margin:5px auto;
            -webkit-animation:scaledown 0.3s linear;
            -moz-animation:scaledown 0.3s linear;
            animation:scaledown 0.2s linear;
            transform-origin:50% 50%;
            animation-fill-mode: forwards;
            background-color: white;
            height: 100px;
            width:100%;

        }

        .card-wrapper:hover {
            box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2);
            z-index:100;
            -webkit-animation:scale 0.3s linear;
            -moz-animation:scale 0.3s linear;
            animation:scale 0.1s linear;
            transform-origin:50% 50%;
            animation-fill-mode: forwards;
        }

        .card-image img {
            border-radius: 5px 0 0 5px;
            height: 90%;
            width: 90px;
            object-fit: cover;
            padding: 5px;
        }


        @keyframes scale{
            0%{
                transform:scale(1.0);
            }
            100%{
                transform:scale(1.02);
            }
        }

        @keyframes scaledown{
            0%{
                transform:scale(1.02);
            }
            100%{
                transform:scale(1.0);
            }
        }

    </style>

    <style>
        .carousel-inner > .carousel-item > img {
            width:auto; height:350px;
        }
    </style>
{% endblock %}

{% block divType %}wrap sideBarRight sideBarShow menuStyle1 menuSmartScrollShow blogStyleExcerpt bodyStyleWide menuStyleFixed visibleMenuDisplay logoImageStyle logoStyleBG{% endblock %}
{% block content %}

    <br>
    <div class="content" style="width: 100% ; border: 0px ;">
        <h1 class="postTitle"> {{plat.nom}}</h1>
        <div class="container">
            <div class="row">

                <div class="col-xs-12 col-md-8 col-lg-8 col-xl-8 " style="margin-top: 20px;" >

                    <div id="carouselExampleControls" class="carousel slide" data-ride="carousel" >
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img class="d-block w-100 img-fluid" src="{{ asset(plat.image0) }}" alt="{{plat.nom}}">
                            </div>
                            {% if plat.image1 is not null %}
                                <div class="carousel-item">
                                    <img class="d-block w-100 img-fluid" src="{{ asset(plat.image1) }}" alt="{{plat.nom}}">
                                </div>
                            {% endif %}
                            {% if plat.image2 is not null %}
                                <div class="carousel-item">
                                    <img class="d-block w-100 img-fluid" src="{{ asset(plat.image1) }}" alt="{{plat.nom}}">
                                </div>
                            {% endif %}
                            {% if plat.image3 is not null %}
                                <div class="carousel-item">
                                    <img class="d-block w-100 img-fluid" src="{{ asset(plat.image1) }}" alt="{{plat.nom}}">
                                </div>
                            {% endif %}
                        </div>
                        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                    <br>
                    <h4 style="color: #a1ce6f;" > Déscription du plat</h4>
                    <p>
                        {{ plat.description }}
                    </p>
                    <br>

                    <div class="row" >
                        <div class=" col-6 col-sm-3 col-xs-3 col-md-3 col-lg-3 col-xl-3" >
                            <h6> Spécialité </h6>
                            <img alt="{{ plat.specialite.nom }}" src="{{ asset(plat.specialite.image) }}" style="height:50px;width: 50px">
                        </div>
                        <div class=" col-6 col-sm-3 col-xs-3 col-md-3 col-lg-3 col-xl-3" >
                            <h6> Difficulté </h6>
                            {{plat.difficulte | upper}}
                        </div>
                        <div class=" col-6 col-sm-3 col-xs-3 col-md-3 col-lg-3 col-xl-3" >
                            <h6> Préparation </h6>
                            {{plat.tempsPrepa}}
                        </div>
                        <div class=" col-6 col-sm-3 col-xs-3 col-md-3 col-lg-3 col-xl-3" >
                            <h6> Cuisson </h6>
                            {{plat.tempsCuisson}}
                        </div>
                    </div>
                    <br>
                    <div class="row" >

                        <div class="col-xs-12 col-md-4 col-lg-4 col-xl-4">
                            <h5 style="color: #a1ce6f;" > Les Ingrédients</h5>
                            <input id="ingred"  type="hidden" value="{{plat.ingredient}}">
                            <div >Plat pour
                                <input type="number" id="myP" min="1" max="10" value="{{ plat.NbrPortion }}"  >
                                {{ plat.nomPortion }}</div>

                            <a id="myButton" href=""></a>
                            <p id="ingredientsF" >{{ingredientsInit |nl2br}} </p>

                            <hr>

                            <h5 style="color: #a1ce6f;" > Les Ustensils</h5>
                            <ul class="sc_list  sc_list_style_ul">
                                {% for u in plat.ustensiles %}
                                    <li class="sc_list_item  odd first">
                                        <span>{{ u.nom }}</span>
                                    </li>
                                {% endfor %}


                            </ul>

                        </div>

                        <div class="col-xs-12 col-md-8 col-lg-8 col-xl-8  ">
                            <h5 style="color: #a1ce6f;" > La Préparation</h5>
                            {% set foo = plat.preparation|split('\n') %}
                            {% set i=1 %}
                            {% for fo in foo %}

                                <div class="page__toggle">
                                    <label class="toggle">
                                        <input class="toggle__input" type="checkbox" >
                                        <span class="toggle__label">
                                            <span class="toggle__text" >{{ fo }}</span>
                                        </span>
                                    </label>
                                </div>

                                {% set i= i+1 %}
                                <br><br><br>
                            {% endfor  %}
                        </div>

                    </div>

                </div>


                <div class="col-xs-12 col-md-4 col-lg-4 col-xl-4">
                    <br>

                    <h4 id="notePlat" style="color: #a1ce6f;" > Nos Conseils </h4>
                    {% if user is not null %}

                        <ul id="recentcomments">
                            {% for n in plat.note %}

                                {% if n.nom[0:4]|upper =='NOTE' %}
                                    <li class="recentcomments">{{ n.descreption }}</li><br>
                                {% endif %}
                                {% for m in user.maladie %}

                                    {% if m.nomMaladie|upper ==n.nom |upper %}
                                        <li class="recentcomments">{{ n.descreption }}</li><br>
                                    {% endif %}
                                {% endfor %}
                            {% endfor %}

                        </ul>
                    {% else %}
                        {% for n in plat.note %}
                            {% if n.nom[0:4]|upper =='NOTE' %}
                                <li class="recentcomments">{{ n.descreption }}</li><br>
                            {% endif %}
                        {% endfor %}
                        <a href="{{ path('login') }}">Connectez vous et editez votre profile pour qu'on puisse vous reccomender des plats selon votre etat </a>
                    {% endif %}

                    <hr>
                    <h5 style="color: #a1ce6f;" > Partager cette recette</h5>
                    <!-- ShareThis BEGIN --><div class="sharethis-inline-share-buttons"></div><!-- ShareThis END -->

                    <!--

                    <hr>
                    <h5>Recettes Similaire</h5>
                    <a style="color: black;" href="https://www.ukla.tn" >
                        <div class="card-wrapper">
                            <div class="card-image">
                                <img src="https://illuminatisymbols.info/wp-content/uploads/illuminati-symbols-Starbucks-Coffee-Logo.gif" alt="Avatar">
                            </div>
                            <div>
                                <h6>Kafteji au Four</h6>
                            </div>
                        </div>
                    </a>
                    
                    -->

                </div>


            </div>
        </div>
    </div>



    {#
    <div class="content">

        <section class="">
            <div class="container">


                <article class="blogStreampage odd emptyPostFormatIcon emptyPostInfo post">

                    <h1 class="postTitle"> <img src="{{ asset('healthyfarm/images/dish3.png') }}" height="50" width="50"> {{plat.nom}}</h1>
                    <div class="post Standard">
                        <div class="sc_slider sc_slider_style_2 sc_slider_swiper sc_slider_controls swiper-container margin_bottom_0">
                            <ul class="slides swiper-wrapper" data-settings="none">

                                <li class="slider_image_1 swiper-slide"  data-theme="dark"><img alt="{{plat.nom}}" src="{{ asset(plat.image0) }}" ></li>
                                {% if plat.image1 is not null %}<li class="slider_image_2 swiper-slide"  data-theme="dark"><img alt="{{plat.nom}}" src="{{ asset(plat.image1) }}"></li>{% endif %}
                                {% if plat.image2 is not null %}<li class="slider_image_3 swiper-slide"  data-theme="dark"><img alt="{{plat.nom}}" src="{{ asset(plat.image2) }}" style="height:500px;width: 900px"></li>{% endif %}
                                {% if plat.image3 is not null %}<li class="slider_image_4 swiper-slide"  data-theme="dark"><img alt="{{plat.nom}}" src="{{ asset(plat.image3) }}" style="height:500px;width: 900px"></li>{% endif %}
                            </ul>
                            <ul class="slider-control-nav">
                                <li class="slide-prev">
                                    <a class="icon-left-open-big" href="#"></a>
                                </li>
                                <li class="slide-next">
                                    <a class="icon-right-open-big" href="#"></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </article>

                <section class="singlePage post">
                    <div class="container-fluid">
                        <article class="postContent">



                            <div class="postTextArea">

                                <div class="">
                                    <blockquote>
                                        <p><img src="{{ asset('healthyfarm/images/description.png') }}" height="23" width="23"> Description du plat :</p>
                                    </blockquote>
                                    <div class=" sc_columns  sc_columns_1 sc_columns_indent">
                                        <div class=" sc_columns_item  sc_columns_item_coun_1 odd first" >

                                            <h4 class="sc_title sc_title_style_3 sc_title_center margin_bottom_10">{{ plat.description }}</h4>
                                        </div>
                                    </div>





                                    <blockquote>
                                        <p><img src="{{ asset('healthyfarm/images/preparation.png') }}" height="23" width="23"> Preparation :</p>
                                    </blockquote>
                                    <div class=" sc_columns  sc_columns_2 sc_columns_indent">

                                            {% set foo = plat.preparation|split('\n') %}
                                            {% set i=1 %}
                                            {% for fo in foo %}

                                                <div class="page__toggle">
                                                    <label class="toggle">
                                                        <input class="toggle__input" type="checkbox" >
                                                        <span class="toggle__label">
                                                                <span class="toggle__text" >{{ fo }}</span>
                                                        </span>
                                                    </label>
                                                </div>

                                                {% set i= i+1 %}
                                                <br><br><br>
                                            {% endfor  %}


                                    </div>



                                </div>
                            </div>
                        </article>
                    </div>
                </section>

            </div>
        </section>

    </div>
    <div id="sidebar_main" class="widget_area sideBar">
        <aside class="widget-first widgetWrap widget_categories">
            <h4 class="title"> <img src="{{ asset('healthyfarm/images/dish.png') }}" height="20" width="20"> Specialité</h4>

            <img alt="-3159" src="{{ asset(plat.specialite.image) }}" style="height:50px;width: 50px">
        </aside><aside class="widget-first widgetWrap widget_recent_comments">
            <h4 class="title"> <img src="{{ asset('healthyfarm/images/Difficulté.png') }}" height="15" width="15"> Difficulté</h4>

            <div class="revWrap revStyle5">

                <div class="post Standard">
                    <div class="sc_section">
                        <div class="sc_skills  sc_skills_bar sc_skills_horizontal" data-type="bar" data-dir="horizontal">

                            <div class="sc_skills_item sc_skills_style_1 odd">
                                <div class="sc_skills_count">

                                    {%   set dataStop=0 %}
                                    {% if( plat.difficulte | upper == "INTERMEDIAIRE" ) %}
                                        {%   set dataStop=50 %}
                                    {% elseif ( plat.difficulte | upper == "FACILE" ) %}
                                        {%   set dataStop=25 %}
                                    {% elseif ( plat.difficulte | upper == "DIFFICILE" ) %}
                                        {%   set dataStop=75 %}
                                    {% endif %}
                                    <div class="sc_skills_total" data-start="0" data-stop="{{ dataStop }}" data-step="1" data-max="100" data-speed="39" data-duration="2964" data-ed="%">
                                        <span>0%</span>
                                    </div>
                                </div>
                            </div>
                            <br>
                            <div class="sc_skills_info"><span class="sc_highlight sc_highlight_style_3"> {{plat.difficulte}}</span></div>
                        </div>
                    </div>
                </div>

            </div>

            {% if user is not null %}

                <ul id="recentcomments">
                    {% for n in plat.note %}

                        {% if n.nom[0:4]|upper =='NOTE' %}
                            <li class="recentcomments">{{ n.descreption }}</li><br>
                        {% endif %}
                        {% for m in user.maladie %}

                            {% if m.nomMaladie|upper ==n.nom |upper %}
                                <li class="recentcomments">{{ n.descreption }}</li><br>
                            {% endif %}
                        {% endfor %}
                    {% endfor %}

                </ul>
            {% else %}
                    {% for n in plat.note %}
                        {% if n.nom[0:4]|upper =='NOTE' %}
                            <li class="recentcomments">{{ n.descreption }}</li><br>
                        {% endif %}
                    {% endfor %}
                <a href="{{ path('login') }}">Connectez vous et editez votre profile pour qu'on puisse vous reccomender des plats selon votre etat </a>
            {% endif %}



        </aside><aside class="widget-first widgetWrap widget_archive">
            <h4 class="title"><img src="{{ asset('healthyfarm/images/clock1.png') }}" height="20" width="20"> Temps</h4>
            <ul>
                <li>
                    <a href='#'><img src="{{ asset('healthyfarm/images/clock.png') }}" height="17" width="17">  Temps de Préparation</a>&nbsp;({{plat.tempsPrepa}} min)
                </li>
                <li>
                    <a href='#'><img src="{{ asset('healthyfarm/images/clock.png') }}" height="17" width="17"> Temps de Cuisine</a>&nbsp;({{plat.tempsCuisson}} min)
                </li>
                <div class="post Standard">


                    <div class="sc_line sc_line_style_3 sc_line_style_dashed">
                    </div>

                </div>
                <li>
                    <a href='#'><img src="{{ asset('healthyfarm/images/clock.png') }}" height="17" width="17"> Temps Totale</a>&nbsp;({{plat.tempsCuisson+plat.tempsPrepa}} min)
                </li>

            </ul>
        </aside>
        <aside class="widget-first widgetWrap widget_categories">

            <h4 class="title"> <img src="{{ asset('healthyfarm/images/ingredient.png') }}" height="20" width="20">Ingrédients</h4>
            <br>
            <input id="ingred"  type="hidden" value="{{plat.ingredient}}">
            <div >Plat pour
            <input type="number" id="myP" min="1" max="10" value="{{ plat.NbrPortion }}"  >
            {{ plat.nomPortion }}</div>

            <a id="myButton" href=""></a>

            <p id="ingredientsF" >{{ingredientsInit |nl2br}} </p>

        </aside>

        <aside class="widget-first widgetWrap widget_recent_posts widget_trex_post">
            <h4 class="title"> <img src="{{ asset('healthyfarm/images/usetensilesIcon.png') }}" height="20" width="20"> Usetensiles</h4>
            <aside class="widget-first widgetWrap widget_flickr">
                <div class="flickr_images">
                    <img src="{{ asset('healthyfarm/images/usetensiles2.jpeg') }}" style="width: 60;height: 60">
                </div>
            </aside>
            <br>
            <div class="post_item">
                <div class="post_wrapper">
                    <div class=" sc_columns_item  sc_columns_item_coun_2 even" >
                        <ul class="sc_list  sc_list_style_ul">
                            {% for u in plat.ustensiles %}
                                <li class="sc_list_item  odd first">
                                    <span>{{ u.nom }}</span>
                                </li>
                            {% endfor %}


                        </ul>
                    </div>
                </div>
            </div>


        </aside>
        <aside class="widgetWrap widget_socials">
            <h4 class="title">Follow us</h4>
            <div class="widget_inner">
                <div class="logo_descr">The theme is compatible with "All on One SEO Pack" & "SEO by Yoast".</div>
                <ul class="social_style_images">
                    <li>
                        <a class="social_icons" href="https://www.facebook.com/pages/ThemeRex-Web-Studio/394746287348477" target="_blank">
                            <img src="{{ asset('healthyfarm/images/facebook.png') }}" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="https://twitter.com/Theme_REX" target="_blank">
                            <img src="{{ asset('healthyfarm/images/twitter.png') }}" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="https://www.behance.net/themerex" target="_blank">
                            <img src="{{ asset('healthyfarm/images/behance.png') }}" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="https://www.youtube.com/channel/UCnFisBimrK2aIE-hnY70kCA" target="_blank">
                            <img src="{{ asset('healthyfarm/images/youtube.png') }}" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="#" target="_blank">
                            <img src="{{ asset('healthyfarm/images/gplus.png') }}" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="#" target="_blank">
                            <img src="images/dribbble.png" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="#" target="_blank">
                            <img src="images/pinterest.png" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="#" target="_blank">
                            <img src="images/linkedin.png" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="#" target="_blank">
                            <img src="images/vimeo.png" alt="" />
                        </a>
                    </li>
                    <li>
                        <a class="social_icons" href="#" target="_blank">
                            <img src="images/rss.png" alt="" />
                        </a>
                    </li>
                </ul>
            </div>
        </aside>
    </div>
    #}
{% endblock %}
{% block javascripts %}
    {{ parent() }}

    <script>
        $(document).ready(function(){
            var portionInit="{{ plat.NbrPortion }}";
            $("#myP").change( function(e){
                var portion = document.getElementById("myP").value;
                var ing = document.getElementById("ingred").value;

                e.preventDefault();
                $.ajax({
                    url:        '{{ path('after_request') }}',
                    type:       'POST',
                    dataType:   'json',
                    data: {portion:portion,ing:ing,portionInit:portionInit},
                    async:      true,

                    success: function(data) {


                        var x = data.response2;
                        x=x.replace(/\n/g,"<br>");
                        $('#ingredientsF').html(x);



                    },
                });
            });
        });

    </script>

    <script>
        $(document).ready(function () {
            // add state already asked
            isClosed=true;
            if ("{{ user }}"==''){
                var element = "<a onclick='callLogin()'>Éditez votre profile pour qu'on puisse vous reccomender des plats selon votre état de santé</a>" ;
                ukla(element , "{{ asset('gifRechAvanc/calm.gif') }}",1000000000000000000000000000000000000);

            }
            else if("{{ plat.note |length }}"!='0'){
                var element = "<a href='#notePlat'>Consultez les notes de ce plat ci-dessous... </a>" ;
                ukla(element , "{{ asset('gifRechAvanc/calm.gif') }}",1000000000000000000000000000000000000);
            }
        });
        function callLogin() {
            $('.user-popup-link').click();
        }
    </script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

{% endblock %}
